<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×—×¤×© ××ª ×”××˜××•×Ÿ - ×—× ×•×›×” ×‘××™×œ×ª</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes bounce-slow {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .animate-fade-in {
      animation: fade-in 0.3s ease-in;
    }
    .animate-bounce-slow {
      animation: bounce-slow 2s ease-in-out infinite;
    }
    body {
      background-color: #0f172a; /* Slate 900 */
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    
    // --- ×¨×›×™×‘×™ ××™×™×§×•× ×™× (SVG) ---
    const Lock = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
      </svg>
    );
    
    const MapPin = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
        <circle cx="12" cy="10" r="3"></circle>
      </svg>
    );
    
    const Brain = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <path d="M12 5a3 3 0 1 0-5.997.142 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588 4 4 0 0 0 7.636 2.106 3 3 0 0 0 .164-.546c.628.285 1.316.44 2.008.44a4.978 4.978 0 0 0 2.548-.787 4 4 0 0 0 4.95-4.95 4 4 0 0 0-.364-4.118 4 4 0 0 0-4.486-2.9A3 3 0 0 0 12 5Z"></path>
        <path d="M12 5v3"></path>
        <path d="M12 8h4.343a1 1 0 0 1 .948.684l1.498 4.493a1 1 0 0 1-.502 1.21l-1.257.63a1.003 1.003 0 0 0-.1.047l-.257.13a.991.991 0 0 1-1.342-.518l-.26-.868a1 1 0 0 0-.61-.63l-1.197-.399A1 1 0 0 0 12.343 12H8a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h2.5"></path>
      </svg>
    );
    
    const ChevronDown = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    );
    
    const Star = ({ size = 24, className = "", fill = "none" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" className={className}>
        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
      </svg>
    );
    
    const PartyPopper = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <path d="M5.8 11.3 2 22l10.7-3.79"></path>
        <path d="M4 3h.01"></path>
        <path d="M22 8h.01"></path>
        <path d="M15 2h.01"></path>
        <path d="M22 20h.01"></path>
        <path d="M22 2h.01"></path>
        <path d="M2 8h.01"></path>
        <path d="M9 2h.01"></path>
        <path d="M9 21h.01"></path>
        <path d="M19 8h.01"></path>
        <path d="M15 21h.01"></path>
        <path d="M12 21h.01"></path>
        <path d="M12 8h.01"></path>
        <path d="M19 21h.01"></path>
        <path d="M5 21h.01"></path>
        <path d="M5 15h.01"></path>
      </svg>
    );
    
    const Shield = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
      </svg>
    );
    
    const X = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );
    
    const Eye = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
        <circle cx="12" cy="12" r="3"></circle>
      </svg>
    );
    
    const Image = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <circle cx="8.5" cy="8.5" r="1.5"></circle>
        <polyline points="21 15 16 10 5 21"></polyline>
      </svg>
    );
    
    const HelpCircle = ({ size = 24, className = "" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
    );

    // --- × ×ª×•× ×™ ×”××©×—×§ ---
    const missionsData = [
      {
        id: 1,
        title: "×ª×—× ×” 1: ×”×œ×•×‘×™ ×”××¤×•××¨",
        location: "××–×•×¨ ×”×™×©×™×‘×” ×”××¨×›×–×™",
        password: "×—× ×•×›×”",
        icon: "ğŸ›‹ï¸",
        kidsTask: {
          title: "×—×™×¤×•×© ×•×™×–×•××œ×™",
          desc: "××¦××• ×—××™×©×” ×”×‘×“×œ×™× ×‘×“×£ ×©××—×œ×§ ×¢×›×©×™×•. ××™ ××•×¦× ×”×›×™ ××”×¨?",
          image: "./youngs2.png"
        },
        adultsTask: {
          title: "×œ×•×’×™×§×”: ××˜×‘×¢×•×ª ×”×–×”×‘",
          desc: "×§×™×‘×œ×ª× 8 ××˜×‘×¢×•×ª ×©×•×§×•×œ×“ ×–×”×™× ×œ××¨××”. ××—×“ ××–×•×™×£ ×•×§×œ ×™×•×ª×¨. ×™×© ×œ×›× ×××–× ×™ ×›×¤×•×ª ×•××•×ª×¨ ×œ×”×©×ª××© ×‘×”× ×¤×¢××™×™× ×‘×œ×‘×“. ×›×™×¦×“ ×ª××¦××• ×‘×•×•×“××•×ª ××ª ×”××˜×‘×¢ ×”××–×•×™×£? ×¦×œ××• ×¡×¨×˜×•×Ÿ ×”×¡×‘×¨.",
          solution: "×©×•×§×œ×™× 3 ××•×œ 3. ×× ×©×•×•×™× - ×”××–×•×™×£ ×‘×™×Ÿ ×”-2 ×©× ×•×ª×¨×• (×©×§×™×œ×” ×©× ×™×™×” 1 ××•×œ 1). ×× ×œ× ×©×•×•×™× - ×œ×•×§×—×™× ××ª ×”-3 ××”×¦×“ ×”×§×œ, ×©×•×§×œ×™× 1 ××•×œ 1. ×× ×©×•×•×™×, ×”×©×œ×™×©×™ ×”×•× ×”××–×•×™×£."
        },
        finalChallenge: {
          desc: "×›×“×™ ×œ×”×ª×§×“× ×œ×ª×—× ×” ×”×‘××”: ×œ×›×• ×œ×›×™×•×•×Ÿ ×”×›× ×™×¡×” ×œ×—×“×¨ ×”××•×›×œ. ××¦××• ××ª ×¢××“×ª ×”×××¨×—×ª ××• ××ª ×”×ª×¤×¨×™×˜ ×”×™×•××™ ×•×”×¦×˜×œ××• ×œ×™×“×• ×›×©××ª× ×¢×•×©×™× ×¤×¨×¦×•×£ ×©×œ '×¨×¢×‘×™× ×××•×“'.",
          area: "×”×›× ×™×¡×” ×œ×—×“×¨ ×”××•×›×œ"
        }
      },
      {
        id: 2,
        title: "×ª×—× ×” 2: ×××œ×›×ª ×”××•×›×œ",
        location: "×›× ×™×¡×” ×œ×—×“×¨ ×”××•×›×œ",
        password: "×¡×•×¤×’× ×™×”",
        icon: "ğŸ½ï¸",
        kidsTask: {
          title: "××¡×•×¨×ª ×—× ×•×›×” ×‘××™××•×’'×™",
          desc: "××™×–×” ××©×¤×˜ ××—× ×•×›×” ××¡×ª×ª×¨ ×‘××™××•×’'×™× ×”××œ×•? ğŸ§™â€â™‚ï¸ > âŒğŸ¤ > ğŸ‘‹ > ğŸ‘„"
        },
        adultsTask: {
          title: "×‘×¢×™×™×ª ××“×™×“×ª × ×•×–×œ×™×",
          desc: "×›×“×™ ×œ×”×“×œ×™×§ ××ª ×”×× ×•×¨×” ×‘××§×“×© ×¦×¨×™×š ×‘×“×™×•×§ 4 ×œ×™×˜×¨ ×©××Ÿ. ×œ×¨×©×•×ª×›× ×›×“ ×’×“×•×œ ××œ×, ×›×“ ×¨×™×§ ×©×œ 5 ×œ×™×˜×¨ ×•×›×“ ×¨×™×§ ×©×œ 3 ×œ×™×˜×¨. ××™×š ×ª××“×“×• 4 ×œ×™×˜×¨?",
          solution: "1. ××œ××• ××ª ×”-5. 2. ×©×¤×›×• ×œ-3 (× ×©××¨ 2 ×‘-5). 3. ×¨×•×§× ×• ××ª ×”-3. 4. ×”×¢×‘×™×¨×• ××ª ×”-2 ×œ-3. 5. ××œ××• ××ª ×”-5. 6. ×©×¤×›×• ×œ-3 ×¢×“ ×©×™×ª××œ× (× ×›× ×¡ ×‘×“×™×•×§ 1 ×œ×™×˜×¨). ×‘-5 × ×©××¨×• 4 ×œ×™×˜×¨."
        },
        finalChallenge: {
          desc: "×›×“×™ ×œ×”×ª×§×“× ×œ×ª×—× ×” ×”×‘××”: ×¨×•×¦×• ×œ××–×•×¨ ×”××¢×œ×™×•×ª! ×”×¦×˜×œ××• ×›×©××ª× ××¦×‘×™×¢×™× ×¢×œ ×”××¡×¤×¨ ×©×œ ×”×§×•××” ×©×‘×” × ××¦× ×”×—×“×¨ ×©×œ×›× (×‘×œ×•×— ×”×›×¤×ª×•×¨×™× ××• ×‘×¦×’ ×”×“×™×’×™×˜×œ×™).",
          area: "×œ×•×‘×™ ×”××¢×œ×™×•×ª"
        }
      },
      {
        id: 3,
        title: "×ª×—× ×” 3: ×¢×•×œ×™× ×•×™×•×¨×“×™×",
        location: "××¡×“×¨×•×Ÿ ×”××¢×œ×™×•×ª",
        password: "× ×¡",
        icon: "ğŸ›—",
        kidsTask: {
          title: "×™×¦×™×¨×” ×× ×•×©×™×ª",
          desc: "×ª× ×• ×œ××—×“ ×”××‘×•×’×¨×™× ×©××™×ª×›× ×œ×¦×œ× ××•×ª×›× ×‘×¡×¨×˜×•×Ÿ ×‘×–××Ÿ ×©××ª× ×¢×•×©×™× ×¤× ×˜×•××™××” ×©×œ ××›×™×œ×ª ×¡×•×¤×’× ×™×•×ª"
        },
        adultsTask: {
          title: "×—×™×“×ª ×”× ×¨×•×ª ×”×‘×•×¢×¨×™×",
          desc: "×™×© ×©× ×™ × ×¨×•×ª ×©×‘×•×¢×¨×™× 60 ×“×§×•×ª ×›×œ ××—×“ (×§×¦×‘ ×œ× ××—×™×“). ××™×š ×ª××“×“×• ×‘×××¦×¢×•×ª× ×‘×“×™×•×§ 45 ×“×§×•×ª?",
          solution: "××“×œ×™×§×™× × ×¨ ×' ××©× ×™ ×”×¦×“×“×™× ×•× ×¨ ×‘' ××¦×“ ××—×“. ×›×©-×' × ×’××¨ (30 ×“×§'), ××“×œ×™×§×™× ××ª ×”×¦×“ ×”×©× ×™ ×©×œ × ×¨ ×‘'. × ×¨ ×‘' ×™×‘×¢×¨ ×¢×•×“ 15 ×“×§×•×ª. ×¡×”'×› 45."
        },
        finalChallenge: {
          desc: "×›×“×™ ×œ×”×ª×§×“× ×œ×ª×—× ×” ×”×‘××”: ×¦××• ×”×—×•×¦×” ×œ××•×•×™×¨ ×”×¤×ª×•×—! ××¦××• ××ª ×”××™× ×”×›×—×•×œ×™× (×”×‘×¨×™×›×”) ×•×”×¦×˜×œ××• ×¢× ××©×§×¤×™ ×©××© ××• ×›×•×‘×¢ ×œ×™×“ ×¡×•×›×ª ×”××¦×™×œ.",
          area: "××–×•×¨ ×”×‘×¨×™×›×”"
        }
      },
      {
        id: 4,
        title: "×ª×—× ×” 4: ×”××™× ×”×§×¨×™×¨×™×",
        location: "×”×‘×¨×™×›×”",
        password: "××™×",
        icon: "ğŸŠâ€â™‚ï¸",
        kidsTask: {
          title: "×—×©×™×‘×” ×œ×˜×¨×œ×™×ª: ×—×™×“×ª ×”× ×¨×•×ª",
          desc: "×—×™×“×”: ×”×–×™×–×• × ×¨ ××—×“ ×‘×œ×‘×“ ×¢×œ ×× ×ª ×œ×”×¤×•×š ××ª ×”×ª×¨×’×™×œ ×œ×××™×ª×™ (8 + 2 = 9):",
          image: "./youngs.png"
          },
        adultsTask: {
          title: "×œ×•×’×™×§×” ×•××•×¤×˜×™××™×–×¦×™×”",
          desc: "×—×™×“×”: ×™×© ×œ×›× ××‘× ×” ×©×œ × ×¨×•×ª. ×”×–×™×–×• × ×¨ ××—×“ ×‘×œ×‘×“ ×¢×œ ×× ×ª ×œ×™×™×¦×¨ 4 ××©×•×œ×©×™×.",
          image: "./adults.png",
          solution: "×™×•×¦×¨×™× ×¤×™×¨××™×“×” ×ª×œ×ª-×××“×™×ª (×˜×˜×¨××“×¨) - ××–×™×–×™× × ×¨ ××—×“ ×›×“×™ ×œ×¡×’×•×¨ ××ª ×”××‘× ×” ×›×œ×¤×™ ××¢×œ×”."
        },
        finalChallenge: {
          desc: "×›×“×™ ×œ×”×ª×§×“× ×œ×ª×—× ×” ×”×‘××”: ×—×¤×©×• ××ª ×”××§×•× ×”×›×™ ×©×§×˜ ×•×§×“×•×© ×‘××œ×•×Ÿ (×‘×™×ª ×”×›× ×¡×ª). ×”×¦×˜×œ××• ×œ×™×“ ×©×œ×˜ ×”×›× ×™×¡×” ××œ×™×• ×›×©××ª× ××¡×× ×™× '×©×©×©...' ×¢× ×”××¦×‘×¢.",
          area: "×›× ×™×¡×” ×œ×‘×™×ª ×”×›× ×¡×ª"
        }
      },
      {
        id: 5,
        title: "×ª×—× ×” 5: ××§×“×© ××¢×˜",
        location: "×‘×™×ª ×”×›× ×¡×ª",
        password: "××›×‘×™",
        icon: "ğŸ•",
        kidsTask: {
          title: "××ª×’×¨ ×”×©×§×˜ ×•×”×™×¦×™×‘×•×ª",
          desc: "× ×¨×•×ª ×”×©×¢×•×•×”: ×¢×œ×™×›× ×œ×¢××•×“ ×¢×œ ×¨×’×œ ××—×ª ×¢× ×™×“×™×™× ×œ××¢×œ×” (×›××• ×œ×”×‘×”) ×‘×œ×™ ×œ×–×•×–. ××™ ×©×–×– ××• × ×•×¤×œ â€“ × ×¤×¡×œ. ×¦×œ××• ××ª ×”× ×¨ ×”×× ×¦×—!"
        },
        adultsTask: {
          title: "×œ×•×’×™×§×” ×˜×”×•×¨×”",
          desc: "×—×™×“×”: '××§×•××™ ×”×¤×•×š ××—×©×™×‘×•×ª×™, ×•×‘×œ×•×¢×–×™×ª ×× ×™ ×ª××™×“ ×”×‘×Ÿ'. ××™ ×× ×™?",
          solution: "×”×©××© (×‘×—× ×•×›×™×™×” ×”×•× ×¢×•××“ ×’×‘×•×” ××‘×œ ×”×•× '×”××©×¨×ª'. ×‘×× ×’×œ×™×ª Sun × ×©××¢ ×›××• Son)."
        },
        finalChallenge: {
          desc: "×¡×™×™××ª× ××ª ×›×œ ×”××¡×œ×•×œ! ×—×–×¨×• ×œ× ×§×•×“×ª ×”×”×ª×—×œ×” ×‘×œ×•×‘×™ ×”×¨××©×™ ×œ×¦×™×œ×•× × ×™×¦×—×•×Ÿ ×§×‘×•×¦×ª×™ ×¢× ×›×œ ×‘× ×™ ×”××©×¤×—×”!",
          area: "×”×œ×•×‘×™ ×”×¨××©×™"
        }
      }
    ];

    // --- ×”××¤×œ×™×§×¦×™×” ×”×¨××©×™×ª ---
    const App = () => {
      const [unlockedMissions, setUnlockedMissions] = useState([]);
      const [passwordInput, setPasswordInput] = useState("");
      const [activeMission, setActiveMission] = useState(null);
      const [showSolution, setShowSolution] = useState(false);
      const [errorMsg, setErrorMsg] = useState("");
      const [gameCompleted, setGameCompleted] = useState(false);
      
      // Admin Modal State
      const [showAdminModal, setShowAdminModal] = useState(false);
      const [adminPassword, setAdminPassword] = useState("");
      const [adminError, setAdminError] = useState("");
      const [adminAction, setAdminAction] = useState({ type: 'RESET' }); // 'RESET' or 'SOLUTION'

      // ×˜×¢×™× ×” ××”×–×™×›×¨×•×Ÿ
      useEffect(() => {
        try {
          const saved = localStorage.getItem('hanukkahHuntState');
          if (saved) {
            setUnlockedMissions(JSON.parse(saved));
          }
        } catch (e) {
          console.error("Error reading from local storage", e);
        }
      }, []);

      // ×‘×“×™×§×ª ×¡×™×•× ××©×—×§
      useEffect(() => {
        if (unlockedMissions.length === missionsData.length && missionsData.length > 0) {
          setGameCompleted(true);
        }
      }, [unlockedMissions]);

      const handleUnlock = (missionId) => {
        const mission = missionsData.find(m => m.id === missionId);
        if (passwordInput.trim() === mission.password) {
          const newUnlocked = [...unlockedMissions, missionId];
          setUnlockedMissions(newUnlocked);
          localStorage.setItem('hanukkahHuntState', JSON.stringify(newUnlocked));
          setPasswordInput("");
          setErrorMsg("");
          setActiveMission(missionId); 
        } else {
          setErrorMsg("×¡×™×¡××” ×©×’×•×™×”, × ×¡×• ×©×•×‘! ğŸ©");
        }
      };

      const openMission = (id) => {
        setActiveMission(id);
        setPasswordInput("");
        setErrorMsg("");
        setShowSolution(false);
      };

      // --- ×œ×•×’×™×§×ª ×× ×”×œ (Admin Logic) ---

      // ×¤×ª×™×—×ª ××•×“×œ ×œ××™×¤×•×¡
      const requestResetGame = () => {
        setAdminAction({ type: 'RESET' });
        setShowAdminModal(true);
        setAdminPassword("");
        setAdminError("");
      };

      // ×¤×ª×™×—×ª ××•×“×œ ×œ×¤×ª×¨×•×Ÿ
      const requestShowSolution = () => {
        if (showSolution) {
          setShowSolution(false); // ×”×¡×ª×¨×” ×œ× ×“×•×¨×©×ª ×¡×™×¡××”
        } else {
          setAdminAction({ type: 'SOLUTION' });
          setShowAdminModal(true);
          setAdminPassword("");
          setAdminError("");
        }
      };

      // ×‘×™×¦×•×¢ ×”×¤×¢×•×œ×” ×œ××—×¨ ×”×§×©×ª ×¡×™×¡××”
      const executeAdminAction = () => {
        if (adminPassword === "adm1n") {
            if (adminAction.type === 'RESET') {
              setUnlockedMissions([]);
              localStorage.setItem('hanukkahHuntState', JSON.stringify([]));
              setActiveMission(null);
              setGameCompleted(false);
            } else if (adminAction.type === 'SOLUTION') {
              setShowSolution(true);
            }
            setShowAdminModal(false);
        } else {
            setAdminError("×¡×™×¡××” ×©×’×•×™×”! × ×¡×• ×©×•×‘.");
        }
      };

      // ×¨×›×™×‘ ×”××•×“×œ ×©×œ ×”×× ×”×œ
      const AdminModal = () => (
        <div className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in" dir="rtl">
          <div className="bg-slate-800 p-6 rounded-2xl w-full max-w-sm border border-slate-600 shadow-2xl relative">
            <button 
              onClick={() => setShowAdminModal(false)}
              className="absolute top-4 left-4 text-slate-400 hover:text-white"
            >
              <X size={24} />
            </button>
            
            <div className="text-center mb-6">
              <Shield className="w-12 h-12 text-red-500 mx-auto mb-2" />
              <h2 className="text-xl font-bold text-white">××™××•×ª ×× ×”×œ</h2>
              <p className="text-slate-400 text-sm">
                {adminAction.type === 'RESET' 
                  ? "×”×–×Ÿ ×¡×™×¡××ª × ×™×”×•×œ ×›×“×™ ×œ××¤×¡ ××ª ×”××©×—×§" 
                  : "×”×–×Ÿ ×¡×™×¡××ª × ×™×”×•×œ ×›×“×™ ×œ×¦×¤×•×ª ×‘×¤×ª×¨×•×Ÿ"}
              </p>
            </div>

            <div className="space-y-4">
              <input 
                type="password" 
                value={adminPassword}
                onChange={(e) => setAdminPassword(e.target.value)}
                placeholder="×¡×™×¡××”..."
                className="w-full p-3 rounded-lg bg-slate-700 border border-slate-600 text-center text-lg focus:ring-2 focus:ring-red-500 outline-none text-white"
              />
              {adminError && <p className="text-red-400 text-sm font-bold text-center animate-pulse">{adminError}</p>}
              
              <button 
                onClick={executeAdminAction}
                className="w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition"
              >
                {adminAction.type === 'RESET' ? "××©×¨ ××™×¤×•×¡" : "×”×¦×’ ×¤×ª×¨×•×Ÿ"}
              </button>
            </div>
          </div>
        </div>
      );

      // ×ª×¦×•×’×ª ××©×™××” ×‘×•×“×“×ª
      if (activeMission !== null) {
        const isLocked = !unlockedMissions.includes(activeMission);
        const mission = missionsData.find(m => m.id === activeMission);

        return (
          <div className="min-h-screen bg-slate-900 text-white p-4 font-sans" dir="rtl">
            <button 
              onClick={() => setActiveMission(null)}
              className="mb-4 flex items-center gap-2 text-amber-400 hover:text-amber-300 transition"
            >
              <ChevronDown className="rotate-90" /> ×—×–×¨×” ×œ××¤×”
            </button>

            <div className="bg-slate-800 rounded-2xl shadow-xl overflow-hidden border border-slate-700">
              <div className="bg-gradient-to-r from-blue-900 to-slate-900 p-6 text-center border-b border-slate-700">
                <span className="text-4xl mb-2 block">{mission.icon}</span>
                <h2 className="text-2xl font-bold text-amber-400">{mission.title}</h2>
                <p className="text-slate-400 text-sm mt-1">{mission.location}</p>
              </div>

              <div className="p-6">
                {isLocked ? (
                  <div className="text-center space-y-4 py-8">
                    <Lock className="w-16 h-16 mx-auto text-slate-600" />
                    <h3 className="text-xl font-bold">×”××©×™××” × ×¢×•×œ×”!</h3>
                    <p className="text-slate-300">×”×›× ×™×¡×• ××ª ×”×¡×™×¡××” ×©××¦××ª× ×‘× ×§×•×“×ª ×”××¡×ª×•×¨:</p>
                    <input 
                      type="text" 
                      value={passwordInput}
                      onChange={(e) => setPasswordInput(e.target.value)}
                      placeholder="×”×›× ×¡ ×¡×™×¡××” ×›××Ÿ..."
                      className="w-full max-w-xs p-3 rounded-lg bg-slate-700 border border-slate-600 text-center text-lg focus:ring-2 focus:ring-amber-500 outline-none"
                    />
                    {errorMsg && <p className="text-red-400 font-bold animate-pulse">{errorMsg}</p>}
                    <button 
                      onClick={() => handleUnlock(mission.id)}
                      className="w-full max-w-xs bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-3 rounded-lg transition"
                    >
                      ×¤×ª×— ××©×™××”
                    </button>
                  </div>
                ) : (
                  <div className="space-y-8 animate-fade-in">
                    
                    {/* ××©×™××ª ×™×œ×“×™× */}
                    <div className="bg-blue-900/30 p-5 rounded-xl border border-blue-500/30">
                      <div className="flex items-center gap-2 mb-3">
                        <Star className="text-yellow-400 fill-yellow-400" />
                        <h3 className="text-xl font-bold text-blue-200">××©×™××ª ×™×œ×“×™×</h3>
                      </div>
                      <h4 className="text-lg font-bold mb-2 text-white">{mission.kidsTask.title}</h4>
                      <p className="text-slate-300 leading-relaxed">{mission.kidsTask.desc}</p>
                      
                      {mission.kidsTask.image && (
                        <div className="my-4 rounded-lg overflow-hidden border border-blue-500/50 shadow-lg">
                          <img 
                            src={mission.kidsTask.image} 
                            alt="×—×™×“×” ×•×™×–×•××œ×™×ª" 
                            className="w-full h-auto object-cover"
                          />
                        </div>
                      )}

                      <div className="mt-4 flex items-center gap-2 text-sm text-blue-300 bg-blue-900/50 p-2 rounded w-fit">
                        <HelpCircle size={16} />
                        <span>×‘×”×¦×œ×—×”!</span>
                      </div>
                    </div>

                    {/* ××©×™××ª ××‘×•×’×¨×™× */}
                    <div className="bg-purple-900/30 p-5 rounded-xl border border-purple-500/30">
                    <div className="flex items-center gap-2 mb-3">
                      <Brain className="text-purple-400" />
                      <h3 className="text-xl font-bold text-purple-200">××©×™××ª ××‘×•×’×¨×™×</h3>
                    </div>
                    <h4 className="text-lg font-bold mb-2 text-white">{mission.adultsTask.title}</h4>
                    <p className="text-slate-300 leading-relaxed mb-4">{mission.adultsTask.desc}</p>
                    
                    {mission.adultsTask.image && (
                      <div className="my-4 rounded-lg overflow-hidden border border-purple-500/50 shadow-lg">
                        <img 
                          src={mission.adultsTask.image} 
                          alt="×—×™×“×” ×•×™×–×•××œ×™×ª ×œ××‘×•×’×¨×™×" 
                          className="w-full h-auto object-cover"
                        />
                      </div>
                    )}
                    
                    <button 
                      onClick={requestShowSolution}
                      className="text-sm text-slate-500 hover:text-slate-300 underline flex items-center gap-1"
                    >
                      {showSolution ? <><Eye size={14} /> ×”×¡×ª×¨ ×¤×ª×¨×•×Ÿ</> : <><Lock size={14} /> ×”×¦×’ ×¤×ª×¨×•×Ÿ (×œ×× ×”×œ ×‘×œ×‘×“)</>}
                    </button>
                    
                    {showSolution && (
                      <div className="mt-3 bg-slate-900 p-3 rounded text-green-400 text-sm animate-fade-in border border-green-500/30">
                        <strong>×¤×ª×¨×•×Ÿ:</strong> {mission.adultsTask.solution}
                      </div>
                    )}
                  </div>

                    {/* ××ª×’×¨ ×¦×™×œ×•× ×¡×•×¤×™ */}
                    <div className="bg-amber-900/30 p-5 rounded-xl border border-amber-500/50 relative overflow-hidden">
                       <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 to-yellow-500"></div>
                       <div className="flex items-start gap-3">
                         <Image className="text-amber-400 flex-shrink-0 mt-1" size={24} />
                         <div>
                           <h3 className="text-lg font-bold text-amber-200 mb-1">××ª×’×¨ ×¦×™×œ×•× ××¢×‘×¨!</h3>
                           <p className="text-slate-200 text-sm leading-relaxed mb-2 font-bold">
                             {mission.finalChallenge.desc}
                           </p>
                           <div className="flex items-center gap-1 text-xs text-amber-400/80">
                             <MapPin size={12} />
                             <span>××–×•×¨ ×¦×™×œ×•×: {mission.finalChallenge.area}</span>
                           </div>
                         </div>
                       </div>
                    </div>

                    <div className="text-center pt-4">
                      <p className="text-slate-400 text-sm mb-2">×‘×™×¦×¢×ª× ×”×›×œ ×•×¦×™×œ××ª×?</p>
                      <button 
                        onClick={() => setActiveMission(null)}
                        className="px-8 py-3 bg-green-600 hover:bg-green-500 rounded-full font-bold shadow-lg transition transform active:scale-95 w-full md:w-auto"
                      >
                        ×©×œ×—× ×• ××ª ×”×ª××•× ×•×ª! ×—×–×¨×” ×œ××¤×”
                      </button>
                    </div>

                  </div>
                )}
              </div>
            </div>
            
            {/* ××•×“×œ ×× ×”×œ ×‘×ª×•×š ×¢××•×“ ×”××©×™××” */}
            {showAdminModal && <AdminModal />}
            
          </div>
        );
      }

      // ×ª×¦×•×’×ª ××¤×” ×¨××©×™×ª
      return (
        <div className="min-h-screen bg-slate-900 text-white font-sans" dir="rtl">
          
          {/* ×›×•×ª×¨×ª */}
          <header className="bg-slate-800 p-6 border-b border-slate-700 shadow-lg text-center relative overflow-hidden">
            <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-amber-500 to-blue-500"></div>
            <h1 className="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-amber-500 mb-2">
              ×—×¤×© ××ª ×”××˜××•×Ÿ
            </h1>
            <p className="text-slate-400 text-sm">×—× ×•×›×” ×‘××™×œ×ª ğŸ•</p>
            
            {/* ×¡×¨×’×œ ×”×ª×§×“××•×ª */}
            <div className="mt-6 max-w-md mx-auto">
              <div className="flex justify-between text-xs text-slate-400 mb-1">
                <span>×”×ª×§×“××•×ª</span>
                <span>{unlockedMissions.length} / {missionsData.length}</span>
              </div>
              <div className="h-2 bg-slate-700 rounded-full overflow-hidden">
                <div 
                  className="h-full bg-amber-500 transition-all duration-500"
                  style={{ width: `${(unlockedMissions.length / missionsData.length) * 100}%` }}
                ></div>
              </div>
            </div>
          </header>

          {/* ×ª×•×›×Ÿ ×¨××©×™ */}
          <main className="p-4 max-w-md mx-auto space-y-4 pb-20">
            
            {gameCompleted && (
              <div className="bg-gradient-to-br from-amber-500 to-orange-600 p-6 rounded-2xl text-center shadow-lg transform animate-bounce-slow mb-6">
                <PartyPopper className="w-12 h-12 mx-auto mb-2 text-white" />
                <h2 className="text-2xl font-bold text-white mb-1">×›×œ ×”×›×‘×•×“!</h2>
                <p className="text-amber-100">×¤×™×¦×—×ª× ××ª ×›×œ ×”××©×™××•×ª!</p>
              </div>
            )}

            <p className="text-center text-slate-400 text-sm mb-4">
              ××¦××• ××ª ×”×¨××–×™× ×‘××œ×•×Ÿ, ×”×–×™× ×• ××ª ×”×¡×™×¡××” ×•×’×œ×• ××ª ×”××©×™××”!
            </p>

            {missionsData.map((mission) => {
              const isUnlocked = unlockedMissions.includes(mission.id);
              return (
                <button
                  key={mission.id}
                  onClick={() => openMission(mission.id)}
                  className={`w-full relative group overflow-hidden rounded-xl p-4 transition-all duration-300 border 
                    ${isUnlocked 
                      ? 'bg-slate-800 border-green-500/30 hover:border-green-500' 
                      : 'bg-slate-800/50 border-slate-700 hover:border-slate-600'
                    } shadow-lg`}
                >
                  <div className="flex items-center gap-4">
                    <div className={`w-12 h-12 rounded-full flex items-center justify-center text-2xl 
                      ${isUnlocked ? 'bg-green-900/30' : 'bg-slate-700'}`}>
                      {isUnlocked ? mission.icon : <Lock size={20} className="text-slate-400" />}
                    </div>
                    
                    <div className="text-right flex-1">
                      <h3 className={`font-bold text-lg ${isUnlocked ? 'text-white' : 'text-slate-400'}`}>
                        {mission.title}
                      </h3>
                      <div className="flex items-center gap-1 text-xs text-slate-500 mt-1">
                        <MapPin size={12} />
                        {mission.location}
                      </div>
                    </div>

                    {isUnlocked && <ChevronDown className="text-slate-500 rotate-90" />}
                  </div>
                </button>
              );
            })}
          </main>

          {/* ×›×¤×ª×•×¨ ××™×¤×•×¡ ××©×—×§ */}
          <footer className="text-center p-8">
            <button 
              onClick={requestResetGame}
              className="text-xs text-slate-600 underline hover:text-red-400 transition flex items-center justify-center gap-1 mx-auto"
            >
              <Shield size={12} />
              ××™×¤×•×¡ ××©×—×§ (×œ×× ×”×œ)
            </button>
          </footer>

          {/* ××•×“×œ ×× ×”×œ ×‘××¡×š ×”×¨××©×™ */}
          {showAdminModal && <AdminModal />}

        </div>
      );
    };

    // ×”×¤×¢×œ×ª ×”××¤×œ×™×§×¦×™×”
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>